<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Effective Software Testing</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/simple.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
<section>
<h2>Effective Software Testing</h2>
<h3>Maur√≠cio Aniche</h3>

<img src="img/cover.png" style="width: 25%;">
<p>https://www.effective-software-testing.com</p>
</section>

<section>
<div class="r-hstack">
	<div style="width: 50%;">
		<img src="img/delft.jpeg" style="width: 90%;">
		<p>Assistant Professor</p>
	</div>
	<div>
<img src="img/adyen.png">
<p>Tech Academy Lead</p>
	</div>
</div>

</section>

<section>
<h2>Why did I write this book?</h2>

<p class="fragment fade-in">To teach software testing @ Delft</p>
<p class="fragment fade-in">Books were either too theoretical or too practical</p>

</section>

<section>
<h2>What's the big novelty?</h2>

<p>I see two of them</p>
</section>

<section>
	Testing as a systematic procedure!
</section>


<section>
	<h2>Testing as a tool...</h2>
<p class="fragment fade-in">to find bugs</p> 
<p class="fragment fade-in">and</p>
<p class="fragment fade-in">to guide development</p>
</section>

<section>

<h2>Contemporary developer testing</h2>

<ul>
<li>Create tests that really find bugs</li>
<li>Use code coverage in the right away</li>
<li>When to go for unit, integration or system testing</li>
<li>Use mocks and stubs to simplify your unit testing</li>
<li>Design testable systems</li>
<li>Write maintainable test code</li>
</ul>

</section>

<section>
<h2>Testing pyramid</h2>

<img src="img/testing-pyramid.png" style="width:80%">
</section>

<section>
<h2>Specification-based testing</h2>

<img src="img/systematic-domain-testing.png" style="width:80%;">
</section>

<section>
Finds occurrences of a pattern in a file.

<pre>
find &lt;pattern&gt; &lt;file&gt;
</pre>

<ul>
<li class="fragment fade-in">Pattern size: empty, single character, many characters, longer than any line in the file.
<li class="fragment fade-in"> Quoting: pattern is quoted, pattern is not quoted, pattern is improperly quoted.
<li class="fragment fade-in"> File name: good file name, no file name with this name, omitted.
<li class="fragment fade-in"> Occurrences in the file: none, exactly one, more than one.
<li class="fragment fade-in"> Occurrences in a single line, assuming line contains the pattern: one, more than one.
</ul>
</section>

<section>
<h2>Code coverage the right way</h2>

<p>Developers hate coverage because they are using it wrong!</p>
</section>

<section>
<p>Coverage as a way to augment your tests</p>

<img src="img/systematic-structural-testing.png" style="width: 70%">
</section>

<section>
You can game the number, so a high number may not mean much, but a super low number means a lot...
</section>

<section>
<h2>Mocking</h2>

<ul>
	<li>Support development</li>
	<li>Simplify testing</li>
</ul>
</section>

<section>
<img src="img/mock-types-you-do-not-own.png" style="width: 80%;">
</section>

<section>
<h2>Designing for testability</h2>

<p>5 things to pay attention to</p>
</section>

<section>
	Dependency injection
</section>

<section>
<pre><code>
public class VeryBadPaidShoppingCartsBatch {

  public void processAll() {

    ShoppingCartHibernateDao db = new ShoppingCartHibernateDao();
    List&lt;ShoppingCart&gt; paidShoppingCarts = db.cartsPaidToday();
    for (ShoppingCart cart : paidShoppingCarts) {

      DeliveryCenterRestApi deliveryCenter =
        new DeliveryCenterRestApi(); 
      LocalDate estimatedDayOfDelivery = deliveryCenter.deliver(cart);

      cart.markAsReadyForDelivery(estimatedDayOfDelivery); 
      db.persist(cart); 

      SMTPCustomerNotifier notifier = new SMTPCustomerNotifier(); 
      notifier.sendEstimatedDeliveryNotification(cart);

      SAPSoapWebService sap = new SAPSoapWebService();
      sap.cartReadyForDelivery(cart);
    }
  }
}
</code>
</pre>
</section>

<section>

<pre><code>
public class PaidShoppingCartsBatch {

  private ShoppingCartRepository db;
  private DeliveryCenter deliveryCenter;
  private CustomerNotifier notifier;
  private SAP sap;

  public PaidShoppingCartsBatch(ShoppingCartRepository db,
       DeliveryCenter deliveryCenter,
       CustomerNotifier notifier, SAP sap) {
    this.db = db;
    this.deliveryCenter = deliveryCenter;
    this.notifier = notifier;
    this.sap = sap;
  }

  public void processAll() {

    List&lt;ShoppingCart&gt; paidShoppingCarts = db.cartsPaidToday();

    for (ShoppingCart cart : paidShoppingCarts) { 

      LocalDate estimatedDayOfDelivery = deliveryCenter.deliver(cart);

      cart.markAsReadyForDelivery(estimatedDayOfDelivery);
      db.persist(cart);

      notifier.sendEstimatedDeliveryNotification(cart);

      sap.cartReadyForDelivery(cart);
    }
  }
}
</code></pre>
</section>
</section>

<section>
	Separate infrastructure from domain code
</section>

<section>
	<h2>Hexagonal architecture</h2>

	<img src="img/hexagonal-architecture-example.png" style="width: 70%";>
</section>

<section>
	Observability and controllability
</section>

<section>
<h2>Larger tests</h2>

<p>Integration and system test are also super important!</p>
</section>

<section>
<h2>Cost/Benefit analysis</h2>

<p>What is the benefit of writing this as an integration test? How much is it going to cost me?</p>
</section>

<section>
Key: invest on infrastructure!
</section>

<section>
<h2>Maintainable test code</h2>

<p class="fragment fade-in"> Tests should be fast</p>
<p class="fragment fade-in"> Tests should be cohesive, independent, and isolated</p>
<p class="fragment fade-in"> Tests should have a reason to exist</p>
<p class="fragment fade-in"> Tests should be repeatable and not flaky</p>
<p class="fragment fade-in"> Tests should have strong assertions</p>
</section>

<section>
<h2>Maintainable test code</h2>

<p class="fragment fade-in"> Tests should break in case the behavior changes</p>
<p class="fragment fade-in"> Tests should have a single and clear reason to fail</p>
<p class="fragment fade-in"> Tests should be easy to write</p>
<p class="fragment fade-in"> Tests should be easy to read</p>
<p class="fragment fade-in"> Tests should be easy to change and evolve</p>

</section>

<section>
<h2>What else?</h2>
<p class="fragment fade-in">Property-based testing</p>
<p class="fragment fade-in">TDD</p>
<p class="fragment fade-in">Monitoring (not covered)</p>
<p class="fragment fade-in">intelligent testing (not covered)</p>
</section>

<section>
<h2>Wanna know more?</h2>

<img src="img/cover.png" style="width: 25%;">
<p>https://www.effective-software-testing.com</p>
</section>

			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
